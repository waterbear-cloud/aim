
<!DOCTYPE html>
<metal:master use-macro="templates['layout.pt'].macros.layout">
  <div metal:fill-slot="content">

    <nav class="navbar">
      <div class="container">
        <ul class="navbar-list">
          <li class="navbar-item">
            <a class="navbar-link" href="#regions">Regions</a>
          </li>
        </ul>
      </div>
    </nav>

    <h2 tal:content="'Environment: ' + env.title_or_name"></h2>

    <div tal:repeat="env_reg env.env_regions.values()">
      <h3 tal:content="'Region: ' + env_reg.name"></h3>
      <div tal:repeat="app env_reg.applications.values()">
        <b>Application:</b> ${app.title_or_name}
        <div class="list-header"><b>Health Checks:</b></div>
        <ul class="sub-list" tal:condition="app.monitoring">
          <li tal:repeat="check app.monitoring.health_checks.values()">
            <b>Name:</b> ${check.title_or_name}
            <b>Domain:</b> ${check.domain_name}
          </li>
        </ul>
        <div tal:repeat="group app.groups.values()">
          <div class="list-header"><b>Group:</b> ${group.title_or_name}</div>
          <ul class="sub-list">
            <li class="sub-item" tal:repeat="res group.resources.values()">
              <b>Resource:</b> ${res.name}
            </li>
          </ul>
        </div>
      </div>
    </div>

  </div>
</metal:master>

